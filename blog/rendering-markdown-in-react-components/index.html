<!doctype html><style>html{height:100vh}body{min-height:100vh;display:grid;grid-template-rows:1fr auto}.footer{grid-row-start:2;grid-row-end:3}</style><html lang=en-gb><head><meta charset=utf-8><title>Sam Robbins</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=monetization content="$ilp.uphold.com/reGxiLfZfUmn"><meta name=description property="og:description" content="How to render markdown inside of a React component"><meta name=image property="og:image" content="/"><meta name=author content="Sam Robbins"><meta name=generator content="Hugo 0.75.1"><link rel=stylesheet href=/css/syntax.min.css integrity media=screen><script src=https://cdn.jsdelivr.net/npm/mailgo@0.9.14/dist/mailgo.min.js defer></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link href=/css/tailwind.min.css rel=stylesheet><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></head><body class=blog><div class=wrapper><nav class="fixed h-16 p-4 bg-white border-b border-gray-200 w-full z-20"><div class="flex divide-x-4 divide-transparent pr-6 text-lg items-center text-gray-700"><a href=/ class=font-normal>Home</a>
<a href=/about/ title=About>About</a>
<a class="text-gray-800 font-semibold" href=/blog/ title=Blog>Blog</a>
<a href=/portfolio/ title=Portfolio>Portfolio</a>
<a href=/writing/ title=Writing>Writing</a></div></nav><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-156072112-1','auto'),ga('send','pageview'))</script><section class="pt-20 px-4"><div class="container mx-auto"><h1 class="text-4xl text-center font-semibold">Rendering Markdown in React Components</h1><p class="text-center text-gray-600 text-xl">How to render markdown inside of a React component</p><div class="py-4 text-gray-600"><p class=text-center><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentcolor" class="h-4 w-4 inline-block stroke-current text-gray-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg>Aug 21, 2020</p><p class=text-center><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentcolor" class="h-4 w-4 inline-block stroke-current text-gray-600"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3A9 9 0 113 12a9 9 0 0118 0z"/></svg>1 minute</p></div><div class="flex justify-center gap-x-40 gap-y-4 flex-wrap"></div><div class="flex justify-center"><script async type=text/javascript src="//cdn.carbonads.com/carbon.js?serve=CEBIVKQN&placement=csnotesme" id=_carbonads_js></script></div><hr class=my-4></div></div></section><div class="container prose mx-auto w-screen px-4 pb-6"><p>For this guide we are going to be using Remark to render markdown.</p><p>Start by installing <code>remark</code> and <code>remark-html</code> using</p><pre><code>npm install remark remark-html --save
</code></pre><p>The function <code>remark</code> is async so can&rsquo;t simply be called to edit the text. To solve this issue, we will create a state <code>defin</code> with</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=p>[</span><span class=nx>defin</span><span class=p>,</span> <span class=nx>setDefin</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=s2>&#34;Definition&#34;</span><span class=p>);</span>
</code></pre></div><p>The resulting HTML from the Markdown is generated with</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=nx>remark</span><span class=p>()</span>
  <span class=p>.</span><span class=nx>use</span><span class=p>(</span><span class=nx>html</span><span class=p>)</span>
  <span class=p>.</span><span class=nx>process</span><span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>children</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=nx>file</span><span class=p>)</span> <span class=p>{</span>
    <span class=nx>setDefin</span><span class=p>(</span><span class=nx>file</span><span class=p>);</span>
  <span class=p>});</span>
</code></pre></div><p>Note here that the text to transform is <code>props.children</code>, change it to whatever is suitable for your usecase.</p><p>This might look like enough, just pass <code>defin</code> to your return and you&rsquo;re done. Sadly when you change a state, the component is rerendered. In that rerendering, the state is set again and you end up in an infinite loop.</p><p>To solve this, wrap the above function in an if statement that checks if defin has been changed, simply:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=k>if</span> <span class=p>(</span><span class=nx>defin</span> <span class=o>===</span> <span class=s2>&#34;Definition&#34;</span><span class=p>)</span> <span class=p>{</span>
  <span class=c1>// Code here
</span><span class=c1></span><span class=p>}</span>
</code></pre></div><p>Finally, to render the resulting HTML, use <code>dangerouslySetInnerHTML</code> like:</p><div class=highlight><pre class=chroma><code class=language-jsx data-lang=jsx><span class=p>&lt;</span><span class=nt>div</span> <span class=na>dangerouslySetInnerHTML</span><span class=o>=</span><span class=p>{{</span> <span class=nx>__html</span><span class=o>:</span> <span class=nx>defin</span> <span class=p>}}</span> <span class=p>/&gt;</span>
</code></pre></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous></div></body></html>